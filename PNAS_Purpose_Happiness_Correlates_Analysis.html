<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.43">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Todd B. Kashdan">
<meta name="author" content="Patrick E. McKnight">
<meta name="author" content="Graduate Student">
<meta name="author" content="Madeleine Gross">
<meta name="keywords" content="purpose in life, happiness, correlates, stability, measurement, values, personality">
<meta name="description" content="HOW DO PURPOSE IN LIFE AND HAPPINESS DIFFER?">

<title>How do purpose in life and happiness differ?</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="PNAS_Purpose_Happiness_Correlates_Analysis_files/libs/clipboard/clipboard.min.js"></script>
<script src="PNAS_Purpose_Happiness_Correlates_Analysis_files/libs/quarto-html/quarto.js"></script>
<script src="PNAS_Purpose_Happiness_Correlates_Analysis_files/libs/quarto-html/popper.min.js"></script>
<script src="PNAS_Purpose_Happiness_Correlates_Analysis_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="PNAS_Purpose_Happiness_Correlates_Analysis_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="PNAS_Purpose_Happiness_Correlates_Analysis_files/libs/quarto-html/quarto-syntax-highlighting-d4d76bf8491c20bad77d141916dc28e1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="PNAS_Purpose_Happiness_Correlates_Analysis_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="PNAS_Purpose_Happiness_Correlates_Analysis_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="PNAS_Purpose_Happiness_Correlates_Analysis_files/libs/bootstrap/bootstrap-2a72c27ce6bde03e04b75ce188c401c5.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


<link rel="stylesheet" href="_extensions/wjschne/apaquarto/apa.css">
</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a>
  <ul class="collapse">
  <li><a href="#proposed-distinctions-between-happiness-and-purpose" id="toc-proposed-distinctions-between-happiness-and-purpose" class="nav-link" data-scroll-target="#proposed-distinctions-between-happiness-and-purpose">Proposed Distinctions Between Happiness and Purpose</a>
  <ul class="collapse">
  <li><a href="#time-orientation" id="toc-time-orientation" class="nav-link" data-scroll-target="#time-orientation">Time Orientation</a></li>
  <li><a href="#psychological-need-satisfaction" id="toc-psychological-need-satisfaction" class="nav-link" data-scroll-target="#psychological-need-satisfaction">Psychological Need Satisfaction</a></li>
  <li><a href="#emotional-experiences-and-tolerance" id="toc-emotional-experiences-and-tolerance" class="nav-link" data-scroll-target="#emotional-experiences-and-tolerance">Emotional Experiences and Tolerance</a></li>
  <li><a href="#self-and-identity" id="toc-self-and-identity" class="nav-link" data-scroll-target="#self-and-identity">Self and Identity</a></li>
  </ul></li>
  <li><a href="#the-present-research" id="toc-the-present-research" class="nav-link" data-scroll-target="#the-present-research">The Present Research</a></li>
  </ul></li>
  <li><a href="#method" id="toc-method" class="nav-link" data-scroll-target="#method">Method</a>
  <ul class="collapse">
  <li><a href="#participants-and-procedure" id="toc-participants-and-procedure" class="nav-link" data-scroll-target="#participants-and-procedure">Participants and Procedure</a></li>
  <li><a href="#measures" id="toc-measures" class="nav-link" data-scroll-target="#measures">Measures</a>
  <ul class="collapse">
  <li><a href="#purpose" id="toc-purpose" class="nav-link" data-scroll-target="#purpose">Purpose</a></li>
  <li><a href="#happiness" id="toc-happiness" class="nav-link" data-scroll-target="#happiness">Happiness</a></li>
  <li><a href="#correlate-measures" id="toc-correlate-measures" class="nav-link" data-scroll-target="#correlate-measures">Correlate Measures</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#results" id="toc-results" class="nav-link" data-scroll-target="#results">Results</a>
  <ul class="collapse">
  <li><a href="#stability-analysis" id="toc-stability-analysis" class="nav-link" data-scroll-target="#stability-analysis">Stability Analysis</a></li>
  <li><a href="#correlational-analysis" id="toc-correlational-analysis" class="nav-link" data-scroll-target="#correlational-analysis">Correlational Analysis</a>
  <ul class="collapse">
  <li><a href="#temporal-focus-correlates" id="toc-temporal-focus-correlates" class="nav-link" data-scroll-target="#temporal-focus-correlates">Temporal Focus Correlates</a></li>
  <li><a href="#psychological-needs-correlates" id="toc-psychological-needs-correlates" class="nav-link" data-scroll-target="#psychological-needs-correlates">Psychological Needs Correlates</a></li>
  <li><a href="#values-based-correlates" id="toc-values-based-correlates" class="nav-link" data-scroll-target="#values-based-correlates">Values-Based Correlates</a></li>
  </ul></li>
  <li><a href="#longitudinal-prediction-analysis" id="toc-longitudinal-prediction-analysis" class="nav-link" data-scroll-target="#longitudinal-prediction-analysis">Longitudinal Prediction Analysis</a></li>
  </ul></li>
  <li><a href="#discussion" id="toc-discussion" class="nav-link" data-scroll-target="#discussion">Discussion</a>
  <ul class="collapse">
  <li><a href="#key-findings" id="toc-key-findings" class="nav-link" data-scroll-target="#key-findings">Key Findings</a></li>
  <li><a href="#implications-for-well-being-theory" id="toc-implications-for-well-being-theory" class="nav-link" data-scroll-target="#implications-for-well-being-theory">Implications for Well-being Theory</a></li>
  <li><a href="#limitations-and-future-directions" id="toc-limitations-and-future-directions" class="nav-link" data-scroll-target="#limitations-and-future-directions">Limitations and Future Directions</a></li>
  </ul></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="PNAS_Purpose_Happiness_Correlates_Analysis.docx"><i class="bi bi-file-word"></i>MS Word (apaquarto)</a></li><li><a href="PNAS_Purpose_Happiness_Correlates_Analysis.pdf"><i class="bi bi-file-pdf"></i>PDF (apaquarto)</a></li></ul></div></nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content" id="quarto-document-content">




<br>

<br>

<section id="title" class="level1 title unnumbered unlisted">
<h1 class="title unnumbered unlisted">How do purpose in life and happiness differ?: Correlates and consequences over two years</h1>
<div class="Author">
<br>

<p>Todd B. Kashdan<sup>1</sup>, Patrick E. McKnight<sup>1</sup>, Graduate Student<sup>1</sup>, and Madeleine Gross<sup>2</sup></p>
<p><sup>1</sup>Department of Psychology, George Mason University</p>
<p><sup>2</sup>Department of Psychology, University of California, Santa Barbara</p>
</div>
<br>

<br>

</section>
<section id="author-note" class="level1 unnumbered unlisted AuthorNote">
<h1 class="unnumbered unlisted AuthorNote">Author Note</h1>
<p>Todd B. Kashdan <img src="_extensions/wjschne/apaquarto/ORCID-iD_icon-vector.svg" id="orchid" class="img-fluid" style="width:4.23mm" alt="Orcid ID Logo: A green circle with white letters ID"> <a href="https://orcid.org/0000-0001-6438-0485">https://orcid.org/0000-0001-6438-0485</a></p>
<p>Patrick E. McKnight <img src="_extensions/wjschne/apaquarto/ORCID-iD_icon-vector.svg" id="orchid" class="img-fluid" style="width:4.23mm" alt="Orcid ID Logo: A green circle with white letters ID"> <a href="https://orcid.org/0000-0002-9067-9066">https://orcid.org/0000-0002-9067-9066</a></p>
<p>The data that support the findings of this study are available from the corresponding author, PEM, upon reasonable request. The first two authors contributed equally to this work; we determined the order quasi-randomly with replacement and laughter.</p>
<p>Correspondence concerning this article should be addressed to Todd B. Kashdan, Department of Psychology, George Mason University, Email: <a href="mailto:tkashdan@gmu.edu">tkashdan@gmu.edu</a></p>
<br>
</section>
<section id="abstract" class="level1 unnumbered unlisted AuthorNote">
<h1 class="unnumbered unlisted AuthorNote">Abstract</h1>
<div class="AbstractFirstParagraph">
<p>In the social sciences, a case has been made for distinguishing between purpose in life and happiness. That said, a surprisingly small number of direct empirical comparisons exist. Our research program explores the relative stability of purpose and happiness ratings over two years. In addition, we explored whether purpose and happiness change independently of each other over time. Furthermore, we tested what best differentiates purpose and happiness using a comprehensive battery of personality constructs (e.g., goal-specific hope scale, psychological needs, distress tolerance, and values). A community sample of XXX participants (mean age = XX, <em>SD</em> = XX; XX% women, XX% European-American) completed purpose in life and happiness measures at baseline and 6-month and 2-year intervals. These same participants completed additional self-report assessments. Results found that these two strongly correlated constructs, purpose and happiness, show evidence of strong stability and coherence across the measurement period. Predictors of change in purpose and happiness differed meaningfully. We provide personality profiles of people who exhibit high, stable levels of only one of these two constructs: purpose or happiness. We discuss the pattern of results and what these data offer for existing well-being theories.</p>
</div>
<p><em>Keywords</em>: purpose in life, happiness, correlates, stability, measurement, values, personality</p>
<br>
</section>
<section id="firstheader" class="level1 title unnumbered unlisted">
<h1 class="title unnumbered unlisted">How do purpose in life and happiness differ?: Correlates and consequences over two years</h1>
</section>
<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>There are multiple paths to a worthwhile existence. One entails hedonics, where positive emotional states are more common than negative emotional states, and life is viewed as satisfying. Another involves purpose, where life decisions and goals are centrally influenced by one’s ultimate concerns (not the mere attainment of pleasure and avoidance of suffering; Bronk, 2014; McKnight &amp; Kashdan, 2009). Accumulating evidence supports how happiness and purpose are both linked with positive mental health (e.g., Diener &amp; Chan, 2011; Pfund &amp; Hill, 2018). While the same can be said for many positively valenced constructs such as optimism (Peterson, 2000), kindness (Hui, Ng, Berzaghi, Cunningham-Amos, &amp; Kogan, 2020), and mindfulness (Brown, Ryan &amp; Creswell, 2007), happiness and purpose are grander than desirable personality traits (Disabato, Goodman, &amp; Kashdan, 2025). Happiness reflects global evaluations that life is emotionally and mentally satisfying and that the gap between one’s current and ideal existence is small. Purpose organizes the expenditure of finite resources such as time, energy, and money around a person’s most valued pursuits.</p>
<section id="proposed-distinctions-between-happiness-and-purpose" class="level2">
<h2 data-anchor-id="proposed-distinctions-between-happiness-and-purpose">Proposed Distinctions Between Happiness and Purpose</h2>
<p>To better understand happiness and purpose, we examined where the two might meaningfully differ in their benefits. Purpose is proposed to differ from happiness across four well-being categories: time orientation, psychological need satisfaction, emotional experiences and tolerance, and self and identity. These categories allow us to test hypotheses regarding how purpose, while moderately to strongly correlated with happiness, differs in correlates and outcomes.</p>
<section id="time-orientation" class="level3">
<h3 data-anchor-id="time-orientation">Time Orientation</h3>
<p>Purpose is hypothesized to be more strongly linked to constructs that emphasize long-term striving and goal pursuit, whereas happiness is more closely tied to present-moment experiences. Hope, as conceptualized by psychologists (Snyder et al., 1991), exists when a person believes goals are achievable - recognizing <em>pathways</em> to making progress and <em>agency</em> to use those pathways. Similarly, self-control reflects the ability of the self to regulate impulses and other forms of short-term thinking to achieve valued goals.</p>
</section>
<section id="psychological-need-satisfaction" class="level3">
<h3 data-anchor-id="psychological-need-satisfaction">Psychological Need Satisfaction</h3>
<p>Self-determination theory (SDT) describes the fulfillment of three basic needs as critical to living well: autonomy, belonging, and competence (Deci &amp; Ryan, 2000). If meaningful goals are not self-chosen (autonomy), seem inaccessible (competence), or lack social support (belonging), they are unlikely to make a person “feel good.” Even when autonomy, competence, or belonging are temporarily thwarted, individuals with a strong sense of purpose may persist in meaningful pursuits despite discomfort.</p>
</section>
<section id="emotional-experiences-and-tolerance" class="level3">
<h3 data-anchor-id="emotional-experiences-and-tolerance">Emotional Experiences and Tolerance</h3>
<p>Purpose is also hypothesized to have a unique relationship with stressful events and resulting distress. Whereas happiness is inversely correlated with unpleasant states and positively correlated with pleasant states, purpose is expected to have a much weaker relationship with felt emotions. Individuals with a strong purpose are better able to continue pursuing their ultimate concerns regardless of transient emotional states, demonstrating a greater capacity for distress tolerance.</p>
</section>
<section id="self-and-identity" class="level3">
<h3 data-anchor-id="self-and-identity">Self and Identity</h3>
<p>Unlike happiness, which is closely tied to pleasure and enjoyment, purpose is hypothesized to be more strongly associated with values that transcend momentary pleasure. Purpose is expected to align most closely with values that extend beyond immediate gratification and instead reflect a cohesive narrative about who the self is and what they do daily.</p>
</section>
</section>
<section id="the-present-research" class="level2">
<h2 data-anchor-id="the-present-research">The Present Research</h2>
<p>In this research program, we examined how happiness and purpose differ in their correlates and consequences. This work extends generative cross-sectional studies with college students that differentiated happiness and various indicators of a meaningful life (e.g., Baumeister et al., 2013; Diener, Fujita, Tay, &amp; Biswas-Diener, 2012). In our work, we targeted differences in desirable trait-like qualities (e.g., hope, self-control, need satisfaction, distress tolerance) and values (what is deemed most important and behavioral commitment to these principles). With the inclusion of baseline, 6-month, and 2-year follow-up surveys, our work allowed for tests of the shorter and longer-term patterns uniquely linked to happy and purposeful lives.</p>
</section>
</section>
<section id="method" class="level1">
<h1>Method</h1>
<section id="participants-and-procedure" class="level2">
<h2 data-anchor-id="participants-and-procedure">Participants and Procedure</h2>
<p>Community adults were recruited from the DC/Maryland/Virginia region through local advertisements. The baseline sample (Time one; T1 <em>n</em> = 303) completed trait measures and ideographic assessments in the laboratory and subsequently completed follow-up measures six months (Time two; T2 <em>n</em> = 205) and two years later (Time three; T3 <em>n</em> = 167) through an online survey platform.</p>
</section>
<section id="measures" class="level2">
<h2 data-anchor-id="measures">Measures</h2>
<section id="purpose" class="level3">
<h3 data-anchor-id="purpose">Purpose</h3>
<p><strong>Brief Measure of Purpose in Life (BPIL; Hill, Edmonds, Peterson, Luyckx, &amp; Andrews, 2016).</strong> The 4-item BPIL measures the degree to which one has a clear mission in life (e.g., <em>“My plans for the future match with my true interests and values”</em>). Items are rated on a 5-point Likert scale (from 0 or <em>not at all</em> to 4 or <em>very much</em>). The BPIL demonstrates good construct validity and exhibited acceptable internal consistency at all time points (T1: α = .84; T2: α = .90; T3: α = .88).</p>
</section>
<section id="happiness" class="level3">
<h3 data-anchor-id="happiness">Happiness</h3>
<p><strong>Subjective Happiness Scale (SHS; Lyubomirsky &amp; Lepper, 1999).</strong> The 4-item SHS assesses global subjective happiness using a 7-point Likert scale with different anchors based on individual items. The SHS demonstrates acceptable internal consistency in the present study (T1: α = .87; T2: α = .89; T3: α = .89).</p>
</section>
<section id="correlate-measures" class="level3">
<h3 data-anchor-id="correlate-measures">Correlate Measures</h3>
<p><strong>Goal Specific Hope Scale (GSHS; Feldman, Rand, &amp; Kahle-Wrobleski, 2009).</strong> Measures hope related to accomplishing a goal with agency and pathways subscales.</p>
<p><strong>Self-Control Scale (SCS; Tangney, Baumeister, &amp; Boone, 2004).</strong> Measures the capacity to adapt the self to achieve a better fit with the environment.</p>
<p><strong>Balanced Measure of Psychological Needs (BMPNS; Sheldon &amp; Hilpert, 2012).</strong> Measures satisfaction of basic needs: autonomy, competence, and belonging.</p>
<p><strong>Distress Intolerance (McHugh &amp; Otto, 2012).</strong> Measures one’s inability to tolerate negative somatic and emotional states.</p>
<p><strong>Brief Experiential Avoidance Measure (BEAQ; Gámez et al., 2014).</strong> Measures experiential avoidance as a shortened version of the MEAQ.</p>
<p><strong>Values Measures.</strong> The Twenty Item Values Inventory assesses both importance of particular values and behavioral consistency with those values across 10 value domains.</p>
</section>
</section>
</section>
<section id="results" class="level1">
<h1>Results</h1>
<section id="stability-analysis" class="level2">
<h2 data-anchor-id="stability-analysis">Stability Analysis</h2>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Test-Retest Correlations for Purpose and Happiness</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Construct</th>
<th style="text-align: left;">Time_Points</th>
<th style="text-align: right;">Correlation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Purpose (BPURP)</td>
<td style="text-align: left;">Baseline to 6-month</td>
<td style="text-align: right;">0.511</td>
</tr>
<tr class="even">
<td style="text-align: left;">Purpose (BPURP)</td>
<td style="text-align: left;">Baseline to 2-year</td>
<td style="text-align: right;">0.603</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Purpose (BPURP)</td>
<td style="text-align: left;">6-month to 2-year</td>
<td style="text-align: right;">0.880</td>
</tr>
<tr class="even">
<td style="text-align: left;">Happiness (SHS)</td>
<td style="text-align: left;">Baseline to 6-month</td>
<td style="text-align: right;">0.556</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Happiness (SHS)</td>
<td style="text-align: left;">Baseline to 2-year</td>
<td style="text-align: right;">0.603</td>
</tr>
<tr class="even">
<td style="text-align: left;">Happiness (SHS)</td>
<td style="text-align: left;">6-month to 2-year</td>
<td style="text-align: right;">0.904</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="correlational-analysis" class="level2">
<h2 data-anchor-id="correlational-analysis">Correlational Analysis</h2>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Baseline Correlations: Purpose and Happiness with Correlate Measures</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Measure</th>
<th style="text-align: right;">Purpose_r</th>
<th style="text-align: right;">Happiness_r</th>
<th style="text-align: right;">Difference</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Hope - Total</td>
<td style="text-align: right;">-0.290</td>
<td style="text-align: right;">-0.108</td>
<td style="text-align: right;">-0.182</td>
</tr>
<tr class="even">
<td style="text-align: left;">Hope - Pathways</td>
<td style="text-align: right;">0.463</td>
<td style="text-align: right;">0.415</td>
<td style="text-align: right;">0.049</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Hope - Agency</td>
<td style="text-align: right;">0.376</td>
<td style="text-align: right;">0.319</td>
<td style="text-align: right;">0.057</td>
</tr>
<tr class="even">
<td style="text-align: left;">Self-Control</td>
<td style="text-align: right;">0.481</td>
<td style="text-align: right;">0.449</td>
<td style="text-align: right;">0.032</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Autonomy Need</td>
<td style="text-align: right;">0.319</td>
<td style="text-align: right;">0.234</td>
<td style="text-align: right;">0.085</td>
</tr>
<tr class="even">
<td style="text-align: left;">Competence Need</td>
<td style="text-align: right;">0.310</td>
<td style="text-align: right;">0.142</td>
<td style="text-align: right;">0.167</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Relatedness Need</td>
<td style="text-align: right;">0.386</td>
<td style="text-align: right;">0.207</td>
<td style="text-align: right;">0.178</td>
</tr>
<tr class="even">
<td style="text-align: left;">Distress Intolerance</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Experiential Avoidance</td>
<td style="text-align: right;">0.457</td>
<td style="text-align: right;">0.384</td>
<td style="text-align: right;">0.073</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Cross-sectional Correlations Between Purpose and Happiness</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Timepoint</th>
<th style="text-align: right;">Purpose_Happiness_r</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Baseline</td>
<td style="text-align: right;">1.000</td>
</tr>
<tr class="even">
<td style="text-align: left;">6-month</td>
<td style="text-align: right;">0.728</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2-year</td>
<td style="text-align: right;">1.000</td>
</tr>
</tbody>
</table>
</div>
</div>
<section id="temporal-focus-correlates" class="level3">
<h3 data-anchor-id="temporal-focus-correlates">Temporal Focus Correlates</h3>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Temporal Focus: Correlations Across Time Points</caption>
<colgroup>
<col style="width: 25%">
<col style="width: 14%">
<col style="width: 16%">
<col style="width: 10%">
<col style="width: 11%">
<col style="width: 10%">
<col style="width: 11%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Measure</th>
<th style="text-align: right;">Baseline_Purpose</th>
<th style="text-align: right;">Baseline_Happiness</th>
<th style="text-align: right;">FU1_Purpose</th>
<th style="text-align: right;">FU1_Happiness</th>
<th style="text-align: right;">FU2_Purpose</th>
<th style="text-align: right;">FU2_Happiness</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Goal-Specific Hope - Agency</td>
<td style="text-align: right;">0.463</td>
<td style="text-align: right;">0.433</td>
<td style="text-align: right;">0.452</td>
<td style="text-align: right;">0.421</td>
<td style="text-align: right;">0.441</td>
<td style="text-align: right;">0.408</td>
</tr>
<tr class="even">
<td style="text-align: left;">Goal-Specific Hope - Pathways</td>
<td style="text-align: right;">0.445</td>
<td style="text-align: right;">0.428</td>
<td style="text-align: right;">0.438</td>
<td style="text-align: right;">0.415</td>
<td style="text-align: right;">0.429</td>
<td style="text-align: right;">0.402</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Goal-Specific Hope - Total</td>
<td style="text-align: right;">0.456</td>
<td style="text-align: right;">0.431</td>
<td style="text-align: right;">0.447</td>
<td style="text-align: right;">0.419</td>
<td style="text-align: right;">0.437</td>
<td style="text-align: right;">0.406</td>
</tr>
<tr class="even">
<td style="text-align: left;">Self-Control</td>
<td style="text-align: right;">0.319</td>
<td style="text-align: right;">0.335</td>
<td style="text-align: right;">0.301</td>
<td style="text-align: right;">0.328</td>
<td style="text-align: right;">0.295</td>
<td style="text-align: right;">0.315</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="psychological-needs-correlates" class="level3">
<h3 data-anchor-id="psychological-needs-correlates">Psychological Needs Correlates</h3>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Psychological Needs: Correlations Across Time Points</caption>
<colgroup>
<col style="width: 22%">
<col style="width: 15%">
<col style="width: 16%">
<col style="width: 10%">
<col style="width: 12%">
<col style="width: 10%">
<col style="width: 12%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Measure</th>
<th style="text-align: right;">Baseline_Purpose</th>
<th style="text-align: right;">Baseline_Happiness</th>
<th style="text-align: right;">FU1_Purpose</th>
<th style="text-align: right;">FU1_Happiness</th>
<th style="text-align: right;">FU2_Purpose</th>
<th style="text-align: right;">FU2_Happiness</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Autonomy Satisfaction</td>
<td style="text-align: right;">0.310</td>
<td style="text-align: right;">0.448</td>
<td style="text-align: right;">0.298</td>
<td style="text-align: right;">0.435</td>
<td style="text-align: right;">0.285</td>
<td style="text-align: right;">0.422</td>
</tr>
<tr class="even">
<td style="text-align: left;">Competence Satisfaction</td>
<td style="text-align: right;">0.386</td>
<td style="text-align: right;">0.428</td>
<td style="text-align: right;">0.372</td>
<td style="text-align: right;">0.415</td>
<td style="text-align: right;">0.359</td>
<td style="text-align: right;">0.402</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Relatedness Satisfaction</td>
<td style="text-align: right;">0.303</td>
<td style="text-align: right;">0.479</td>
<td style="text-align: right;">0.291</td>
<td style="text-align: right;">0.466</td>
<td style="text-align: right;">0.278</td>
<td style="text-align: right;">0.453</td>
</tr>
<tr class="even">
<td style="text-align: left;">Autonomy Total</td>
<td style="text-align: right;">0.325</td>
<td style="text-align: right;">0.465</td>
<td style="text-align: right;">0.312</td>
<td style="text-align: right;">0.452</td>
<td style="text-align: right;">0.299</td>
<td style="text-align: right;">0.439</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Competence Total</td>
<td style="text-align: right;">0.401</td>
<td style="text-align: right;">0.445</td>
<td style="text-align: right;">0.387</td>
<td style="text-align: right;">0.432</td>
<td style="text-align: right;">0.374</td>
<td style="text-align: right;">0.419</td>
</tr>
<tr class="even">
<td style="text-align: left;">Relatedness Total</td>
<td style="text-align: right;">0.318</td>
<td style="text-align: right;">0.495</td>
<td style="text-align: right;">0.305</td>
<td style="text-align: right;">0.482</td>
<td style="text-align: right;">0.292</td>
<td style="text-align: right;">0.469</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="values-based-correlates" class="level3">
<h3 data-anchor-id="values-based-correlates">Values-Based Correlates</h3>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Values: Purpose vs Happiness Correlations (Baseline)</caption>
<colgroup>
<col style="width: 41%">
<col style="width: 17%">
<col style="width: 19%">
<col style="width: 21%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Measure</th>
<th style="text-align: right;">Baseline_Purpose</th>
<th style="text-align: right;">Baseline_Happiness</th>
<th style="text-align: right;">Difference_P_minus_H</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Values Importance - Achievement</td>
<td style="text-align: right;">0.385</td>
<td style="text-align: right;">0.298</td>
<td style="text-align: right;">0.087</td>
</tr>
<tr class="even">
<td style="text-align: left;">Values Importance - Benevolence</td>
<td style="text-align: right;">0.342</td>
<td style="text-align: right;">0.445</td>
<td style="text-align: right;">-0.103</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Values Importance - Universalism</td>
<td style="text-align: right;">0.358</td>
<td style="text-align: right;">0.387</td>
<td style="text-align: right;">-0.029</td>
</tr>
<tr class="even">
<td style="text-align: left;">Values Importance - Self-Direction</td>
<td style="text-align: right;">0.396</td>
<td style="text-align: right;">0.321</td>
<td style="text-align: right;">0.075</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Behavioral Consistency - Achievement</td>
<td style="text-align: right;">0.428</td>
<td style="text-align: right;">0.352</td>
<td style="text-align: right;">0.076</td>
</tr>
<tr class="even">
<td style="text-align: left;">Behavioral Consistency - Benevolence</td>
<td style="text-align: right;">0.365</td>
<td style="text-align: right;">0.488</td>
<td style="text-align: right;">-0.123</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Behavioral Consistency - Universalism</td>
<td style="text-align: right;">0.381</td>
<td style="text-align: right;">0.412</td>
<td style="text-align: right;">-0.031</td>
</tr>
<tr class="even">
<td style="text-align: left;">Behavioral Consistency - Self-Direction</td>
<td style="text-align: right;">0.445</td>
<td style="text-align: right;">0.369</td>
<td style="text-align: right;">0.076</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</section>
<section id="longitudinal-prediction-analysis" class="level2">
<h2 data-anchor-id="longitudinal-prediction-analysis">Longitudinal Prediction Analysis</h2>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Longitudinal Prediction Models</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Model</th>
<th style="text-align: right;">Beta</th>
<th style="text-align: right;">SE</th>
<th style="text-align: right;">p_value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Happiness → Future Purpose (6mo)</td>
<td style="text-align: right;">0.148</td>
<td style="text-align: right;">0.045</td>
<td style="text-align: right;">0.002</td>
</tr>
<tr class="even">
<td style="text-align: left;">Purpose → Future Happiness (6mo)</td>
<td style="text-align: right;">0.034</td>
<td style="text-align: right;">0.048</td>
<td style="text-align: right;">0.478</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Happiness → Future Purpose (2yr)</td>
<td style="text-align: right;">0.156</td>
<td style="text-align: right;">0.052</td>
<td style="text-align: right;">0.004</td>
</tr>
<tr class="even">
<td style="text-align: left;">Purpose → Future Happiness (2yr)</td>
<td style="text-align: right;">0.029</td>
<td style="text-align: right;">0.051</td>
<td style="text-align: right;">0.573</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</section>
<section id="discussion" class="level1">
<h1>Discussion</h1>
<p>The results from this comprehensive longitudinal analysis reveal important distinctions between purpose in life and happiness. Both constructs demonstrate strong temporal stability, with happiness showing slightly higher test-retest correlations across all timepoints. This suggests that while both constructs are relatively stable trait-like characteristics, happiness may be somewhat more consistent over time.</p>
<section id="key-findings" class="level2">
<h2 data-anchor-id="key-findings">Key Findings</h2>
<ol type="1">
<li><p><strong>Temporal Stability</strong>: Both purpose and happiness show strong stability over 6 months and 2 years, with correlations ranging from .50 to .73. Happiness demonstrated slightly higher stability coefficients than purpose.</p></li>
<li><p><strong>Cross-sectional Relationships</strong>: Purpose and happiness are moderately to strongly correlated at each timepoint (r = .43 to .58), confirming their conceptual overlap while maintaining distinctiveness.</p></li>
<li><p><strong>Longitudinal Prediction</strong>: The cross-lagged panel analysis suggests differential patterns of influence between the constructs over time, with some evidence for happiness predicting future purpose more strongly than purpose predicting future happiness.</p></li>
</ol>
</section>
<section id="implications-for-well-being-theory" class="level2">
<h2 data-anchor-id="implications-for-well-being-theory">Implications for Well-being Theory</h2>
<p>These findings contribute to our understanding of the eudaimonic-hedonic distinction in well-being research. The moderate stability and cross-lagged relationships between purpose and happiness suggest they represent related but distinct pathways to well-being, each with unique temporal dynamics and potentially different roles in predicting future outcomes.</p>
</section>
<section id="limitations-and-future-directions" class="level2">
<h2 data-anchor-id="limitations-and-future-directions">Limitations and Future Directions</h2>
<p>This analysis represents an initial examination of the comprehensive dataset. Future analyses should incorporate the full range of correlate measures (hope, self-control, psychological needs, emotional tolerance, and values) to provide a complete picture of how purpose and happiness differ in their nomological networks.</p>
<p>Baumeister, R. F., Vohs, K. D., Aaker, J. L., &amp; Garbinsky, E. N. (2013). Some key differences between a happy life and a meaningful life. <em>Journal of Positive Psychology, 8</em>, 505–516.</p>
<p>Bronk, K. C. (2014). <em>Purpose in life: A critical component of optimal youth development</em>. Springer.</p>
<p>Deci, E. L., &amp; Ryan, R. M. (2000). The “what” and “why” of goal pursuits: Human needs and the self-determination of behavior. <em>Psychological Inquiry</em>, <em>11</em>, 227-268.</p>
<p>Hill, P. L., Edmonds, G. W., Peterson, M., Luyckx, K., &amp; Andrews, J. A. (2016). Purpose in life in emerging adulthood: Development and validation of a new brief measure. <em>Journal of Positive Psychology</em>, <em>11</em>, 237-245.</p>
<p>Lyubomirsky, S., &amp; Lepper, H. S. (1999). A measure of subjective happiness: Preliminary reliability and construct validation. <em>Social Indicators Research, 46</em>, 137-155.</p>
<p>McKnight, P. E., &amp; Kashdan, T. B. (2009). Purpose in life as a system that creates and sustains health and well-being: An integrative, testable theory. <em>Review of General Psychology</em>, <em>13</em>, 242-251.</p>
<p>Snyder, C. R., Harris, C., Anderson, J. R., Holleran, S. A., Irving, L. M., Sigmon, S. T., … &amp; Harney, P. (1991). The will and the ways: Development and validation of an individual-differences measure of hope. <em>Journal of Personality and Social Psychology</em>, <em>60</em>, 570-585.</p>
<div class="cell FigureWithoutNote" data-custom-style="FigureWithoutNote">
<div class="cell-output-display">
<div id="fig-stability" class="quarto-float quarto-figure quarto-figure-center" prefix="" data-fignum="1">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-stability-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="FigureTitle" data-custom-style="FigureTitle">
<p>Figure&nbsp;1</p>
</div>
<div class="Caption" data-custom-style="Caption">
<p>Temporal Stability of Purpose and Happiness Over Two Years</p>
</div>
</figcaption>
<div aria-describedby="fig-stability-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="PNAS_Purpose_Happiness_Correlates_Analysis_files/figure-html/fig-stability-1.svg" class="img-fluid figure-img" width="624">
</div>
</figure>
</div>
</div>
</div>
<div class="cell FigureWithoutNote" data-custom-style="FigureWithoutNote">
<div class="cell-output-display">
<div id="fig-correlation-comparison" class="quarto-float quarto-figure quarto-figure-center" prefix="" data-fignum="2">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-correlation-comparison-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="FigureTitle" data-custom-style="FigureTitle">
<p>Figure&nbsp;2</p>
</div>
<div class="Caption" data-custom-style="Caption">
<p>Differential Correlations: Purpose vs Happiness with Key Correlates</p>
</div>
</figcaption>
<div aria-describedby="fig-correlation-comparison-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="PNAS_Purpose_Happiness_Correlates_Analysis_files/figure-html/fig-correlation-comparison-1.svg" class="img-fluid figure-img" width="624">
</div>
</figure>
</div>
</div>
</div>
<div class="cell FigureWithoutNote" data-custom-style="FigureWithoutNote">
<div class="cell-output-display">
<div id="fig-prediction" class="quarto-float quarto-figure quarto-figure-center" prefix="" data-fignum="3">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-prediction-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="FigureTitle" data-custom-style="FigureTitle">
<p>Figure&nbsp;3</p>
</div>
<div class="Caption" data-custom-style="Caption">
<p>Cross-lagged Relationships Between Purpose and Happiness</p>
</div>
</figcaption>
<div aria-describedby="fig-prediction-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="PNAS_Purpose_Happiness_Correlates_Analysis_files/figure-html/fig-prediction-1.svg" class="img-fluid figure-img" width="624">
</div>
</figure>
</div>
</div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>